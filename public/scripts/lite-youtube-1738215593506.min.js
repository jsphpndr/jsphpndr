function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey(r.key),r)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,e||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _callSuper(t,e,o){return e=_getPrototypeOf(e),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(e,o||[],_getPrototypeOf(t).constructor):e.apply(t,o))}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(o,t)})(t)}function _construct(t,e,o){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return o&&_setPrototypeOf(i,o.prototype),i}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _isNativeFunction(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}export var LiteYTEmbed=function(t){function e(){var t;return _classCallCheck(this,e),(t=_callSuper(this,e)).iframeLoaded=!1,t.setupDom(),t}return _inherits(e,_wrapNativeSuper(HTMLElement)),_createClass(e,[{key:"connectedCallback",value:function(){var t=this;this.addEventListener("pointerover",e.warmConnections,{once:!0}),this.addEventListener("click",(function(){return t.addIframe()}))}},{key:"videoId",get:function(){return encodeURIComponent(this.getAttribute("videoid")||"")},set:function(t){this.setAttribute("videoid",t)}},{key:"videoTitle",get:function(){return this.getAttribute("videotitle")||"Video"},set:function(t){this.setAttribute("videotitle",t)}},{key:"videoPlay",get:function(){return this.getAttribute("videoPlay")||"Play"},set:function(t){this.setAttribute("videoPlay",t)}},{key:"videoStartAt",get:function(){return Number(this.getAttribute("videoStartAt")||"0")},set:function(t){this.setAttribute("videoStartAt",String(t))}},{key:"autoLoad",get:function(){return this.hasAttribute("autoload")},set:function(t){t?this.setAttribute("autoload",""):this.removeAttribute("autoload")}},{key:"params",get:function(){return"start=".concat(this.videoStartAt,"&").concat(this.getAttribute("params"))}},{key:"setupDom",value:function(){this.attachShadow({mode:"open"}).innerHTML='\n        <style>:host{contain:content;display:block;position:relative;width:100%;padding-bottom:calc(100% / (16 / 9))}#fallbackPlaceholder,#frame,iframe{position:absolute;width:100%;height:100%}#frame{cursor:pointer}#fallbackPlaceholder{object-fit:cover}#frame::before{content:\'\';display:block;position:absolute;top:0;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==);background-position:top;background-repeat:repeat-x;height:60px;padding-bottom:50px;width:100%;transition:all .2s cubic-bezier(0,0,.2,1);z-index:1}.lty-playbtn{width:70px;height:46px;background-color:#212121;z-index:1;opacity:.8;border-radius:14%;transition:all .2s cubic-bezier(0,0,.2,1);border:0}#frame:hover .lty-playbtn{background-color:red;opacity:1}.lty-playbtn:before{content:\'\';border-style:solid;border-width:11px 0 11px 19px;border-color:transparent transparent transparent #fff}.lty-playbtn,.lty-playbtn:before{position:absolute;top:50%;left:50%;transform:translate3d(-50%,-50%,0)}.lyt-activated{cursor:unset}#frame.lyt-activated::before,.lyt-activated .lty-playbtn{display:none}</style>\n        <div id="frame">\n            <picture>\n            <source id="webpPlaceholder" type="image/webp">\n            <source id="jpegPlaceholder" type="image/jpeg">\n            <img id="fallbackPlaceholder" referrerpolicy="origin">\n            </picture>\n            <button class="lty-playbtn"></button>\n        </div>\n        ',this.domRefFrame=this.shadowRoot.querySelector("#frame"),this.domRefImg={fallback:this.shadowRoot.querySelector("#fallbackPlaceholder"),webp:this.shadowRoot.querySelector("#webpPlaceholder"),jpeg:this.shadowRoot.querySelector("#jpegPlaceholder")},this.domRefPlayButton=this.shadowRoot.querySelector(".lty-playbtn")}},{key:"setupComponent",value:function(){this.initImagePlaceholder(),this.domRefPlayButton.setAttribute("aria-label","".concat(this.videoPlay,": ").concat(this.videoTitle)),this.setAttribute("title","".concat(this.videoPlay,": ").concat(this.videoTitle)),this.autoLoad&&this.initIntersectionObserver()}},{key:"attributeChangedCallback",value:function(t,e,o){switch(t){case"videoid":e!==o&&(this.setupComponent(),this.domRefFrame.classList.contains("lyt-activated")&&(this.domRefFrame.classList.remove("lyt-activated"),this.shadowRoot.querySelector("iframe").remove(),this.iframeLoaded=!1))}}},{key:"addIframe",value:function(){if(!this.iframeLoaded){var t='\n<iframe frameborder="0"\n  allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen\n  src="https://www.youtube.com/embed/'.concat(this.videoId,"?autoplay=1&").concat(this.params,'"\n></iframe>');this.domRefFrame.insertAdjacentHTML("beforeend",t),this.domRefFrame.classList.add("lyt-activated"),this.iframeLoaded=!0}}},{key:"initImagePlaceholder",value:function(){e.addPrefetch("preconnect","https://i.ytimg.com/");var t="https://i.ytimg.com/vi_webp/".concat(this.videoId,"/hqdefault.webp"),o="https://i.ytimg.com/vi/".concat(this.videoId,"/hqdefault.jpg");this.domRefImg.webp.srcset=t,this.domRefImg.jpeg.srcset=o,this.domRefImg.fallback.src=o,this.domRefImg.fallback.setAttribute("aria-label","".concat(this.videoPlay,": ").concat(this.videoTitle)),this.domRefImg.fallback.setAttribute("alt","".concat(this.videoPlay,": ").concat(this.videoTitle))}},{key:"initIntersectionObserver",value:function(){var t=this;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window){new IntersectionObserver((function(o,r){o.forEach((function(o){o.isIntersecting&&!t.iframeLoaded&&(e.warmConnections(),t.addIframe(),r.unobserve(t))}))}),{root:null,rootMargin:"0px",threshold:0}).observe(this)}}}],[{key:"observedAttributes",get:function(){return["videoid"]}},{key:"addPrefetch",value:function(t,e,o){var r=document.createElement("link");r.rel=t,r.href=e,o&&(r.as=o),r.crossOrigin="true",document.head.append(r)}},{key:"warmConnections",value:function(){e.preconnected||(e.addPrefetch("preconnect","https://s.ytimg.com"),e.addPrefetch("preconnect","https://www.youtube.com"),e.addPrefetch("preconnect","https://www.google.com"),e.addPrefetch("preconnect","https://googleads.g.doubleclick.net"),e.addPrefetch("preconnect","https://static.doubleclick.net"),e.preconnected=!0)}}])}();LiteYTEmbed.preconnected=!1,customElements.define("lite-youtube",LiteYTEmbed);